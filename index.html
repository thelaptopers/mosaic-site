
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Face Mosaic Generator</title>

<script defer src="https://cdn.jsdelivr.net/npm/face-api.js"></script>

<style>
body{
background:#0f0f0f;
color:white;
font-family:Arial;
text-align:center;
padding:30px;
}

.container{
background:#1c1c1c;
padding:25px;
border-radius:15px;
max-width:800px;
margin:auto;
}

button{
padding:12px 20px;
border:none;
border-radius:8px;
background:#4f7cff;
color:white;
margin-top:10px;
cursor:pointer;
}

canvas{
margin-top:20px;
max-width:100%;
}
</style>
</head>

<body>

<h1>AI Face Mosaic</h1>

<div class="container">

<input type="file" id="upload">
<br>
<button onclick="start()">Generate Portrait</button>

<br>

<canvas id="canvas"></canvas>

</div>

<script>

async function start(){

const file = document.getElementById("upload").files[0];
if(!file) return;

const img = new Image();
img.src = URL.createObjectURL(file);

await faceapi.nets.tinyFaceDetector.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js/weights')

img.onload = async function(){

const detection = await faceapi.detectSingleFace(img,new faceapi.TinyFaceDetectorOptions())

const box = detection.box

const canvas = document.getElementById("canvas")
const ctx = canvas.getContext("2d")

canvas.width = 1000
canvas.height = 1000

ctx.drawImage(
img,
box.x,box.y,box.width,box.height,
0,0,1000,1000
)

let size = 2

for(let y=0;y<1000;y+=size){
for(let x=0;x<1000;x+=size){

let p = ctx.getImageData(x,y,1,1).data
let avg = (p[0]+p[1]+p[2])/3

let color = avg>120 ? 255 : 0

ctx.fillStyle = `rgb(${color},${color},${color})`
ctx.fillRect(x,y,size,size)

}
}

}

}

</script>

</body>
</html
